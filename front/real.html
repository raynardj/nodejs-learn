<!DOCTYPE html>

<head>
    <!-- CSS only -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous">
    </script>
</head>

<body>
    <div class="row">
        <div class="col-sm-1"></div>
        <div class="col-sm-10">


            <h2 class='mt-5'>
                ‰∏äÊµ∑‰π∞üß§‰∫åÊâãÊàø etc
            </h2>

            <div class='mt-5'>
                <ul class="list-group">
                    <li class="list-group-item">
                        <label for="price">ÊÄª‰ª∑(‰∏á)</label>
                        <input name='price' id="price" type="text" class='form-control'>
                    </li>
                    <li class="list-group-item">
                        <label for="markprice">ÂÅöÂ∑Æ‰ª∑(‰∏á) ÂèØ‰ª•Ë¥üÊï∞</label>
                        <input name='markprice' id="markprice" value=0 
                        type="text" placeholder=0 class='form-control'>
                    </li>
                    
                    <li class="list-group-item">
                        <label for="price2">ÂÅö‰ª∑(‰∏á) ÂêàÂêå‰ª∑</label>
                        <input name='price2' id="price2" value=0 
                        type="text" placeholder=0 class='form-control' readonly>
                    </li>
                    <li class="list-group-item">
                        <label for="realtype">‰ΩèÂÆÖÁ±ªÂûã</label>
                        <select name="realtype" id="realtype" class='form-control'>
                            <option value="extraordi">ÈùûÊôÆÈÄö‰ΩèÂÆÖ</option>
                            <option value="oridi">ÊôÆÈÄö‰ΩèÂÆÖ</option>
                        </select>
                    </li>
                    <li class="list-group-item">
                        <label for="price_last">ÂçñÊñπ‰π∞ÂÖ•‰ª∑</label>
                        <input name='price_last' id="price_last" value=0 
                        type="text" placeholder=0 class='form-control'>
                    </li>
                    <li class="list-group-item">
                        <label for="years">Âπ¥‰ªΩ</label>
                        <select name="years" id="years" class='form-control'>
                            <option value="0">2 Âπ¥‰∏çÂà∞</option>
                            <option value="1">2-5 Âπ¥</option>
                            <option value="2">5 Âπ¥‰ª•‰∏ä</option>
                        </select>
                    </li>
                    <li class="list-group-item">
                        <label for="only">‰∫ßÊùÉ‰∫∫ÂÆ∂Â∫≠ÂîØ‰∏Ä</label>
                        <select name="only" id="only" class='form-control'>
                            <option value=0>‰∏çÂîØ‰∏Ä</option>
                            <option value=1>ÂîØ‰∏Ä</option>
                        </select>
                    </li>
                    <li class="list-group-item">
                        <h5>Ë¥∑Ê¨æ</h5>
                    </li>
                    <li class="list-group-item">
                        <label for="downpay">È¶ñ‰ªò</label>
                        <input name='downpay' id='downpay' type="text" class='form-control'>
                    </li>
                    <li class="list-group-item">
                        <label for="gov_loan">ÂÖ¨ÁßØÈáëË¥∑Ê¨æ (‰∏á)</label>
                        <input name='gov_loan' type="text" placeholder="100" default=100 class='form-control'>
                    </li>
                    <li class="list-group-item">
                        <h5>
                            Á®éË¥π
                        </h5>
                    </li>
                    <li class="list-group-item">
                        <label for="deedtax">Â•ëÁ®é</label>
                        <input type="text" name="deedtax" id="deedtax" class="form-control">
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-sm-1"></div>
    </div>
</body>
<script>
    $(document).ready(function(){

        const update_downpay = (price)=>{
            var downpay = price*0.35
            $("#downpay").val(downpay)
        }
        const update_deedtax = (price)=>{
            var deedtax = price*0.01
            $("#deedtax").val(deedtax)
        }

        const update_data = ()=>{
            var price = parseInt($("#price").val())
            var markprice = parseInt($("#markprice").val())
            var isordi = $("#realtype")[0].selectedIndex
            var years = $('#years')[0].selectedIndex
            var price_last = $('#price_last').val()
            
            console.log({price,markprice,isordi})
            $("#price2").val(price+markprice)
            price2 = price+markprice
            return {price2,isordi,markprice,years,price_last}
        }

        const va_t = (va)=>{
            return (va/1.05)*0.056
        }

        const calc_vat = (data)=>{
            const {isordi,years,price2,price_last} = data
            if(isordi==1){ // ordinary
                if(years==0){// less than 2 years
                    return va_t(price2)
                }
                else{
                    return 0
                }
            }else{// not ordinary
                if(years==0){// less than 2 years
                    return va_t(price2)
                }else{ // mroe than 2 years
                    return va_t(price2-price_last)
                }
            }
        }

        const calc_PIT = (data,vat)=>{
            // personal income tax
            const {only} = data
            if (only ==1){
                return 0
            }
        }

        const update_all = ()=>{
            const {price2} = update_data()
            update_downpay(price2)
            update_deedtax(price2)
        }
        $("#price").change(update_all)
        $("#markprice").change(update_all)
    })
</script>